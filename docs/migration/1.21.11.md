---
sidebar_position: -20251125
---

# Minecraft 1.21.11

:::info
These migration notes cover only the changes made to Balm APIs. 

For Minecraft and mod-loader specific migrations, check out their respective release announcements or primers.
:::

## Overview

In Minecraft 1.21.11, Balm's registry methods and event system have received major refactors. Almost all packages have been reorganized to be more consistent and align with Minecraft's package structure.

The new registry methods severely clean up the registration calls as well as their internal implementations, matching the style that Minecraft uses to register its own blocks, adjusted to the needs of mod loaders and modder convenience.

The new event system comes with better performance and better integration into mod loaders. For example, events now support phases on Fabric (priority equivalent on Neo/Forge), and the system supports firing back into the native mod loader bus for selected events, which can be used to e.g. notify other non-Balm mods about native events like block breaks.

The new consistent package structure makes it easier to distinguish API classes from internal implementations and avoids ambiguities between Vanilla and mod loader concepts (e.g. there are two concepts of Permissions, one based on Vanilla's new 1.21.11 permission system, and one based on the Bukkit-esque permissio ecosystem, which are now clearly distinguished).

This was the first refactor Balm has undergone since it started as a roughly put together library for my own mods four years ago. These changes resulted in many of Balm's internals being cleaned up and modernized to match the current modding ecosystem.

## ⚠️ Known Issues

### `/balm export icons` is not yet functional

The command has not yet been updated to Minecraft's rendering changes.

## Breaking Changes

### Many `net.blay09.mods.balm` packages have moved

I recommend cleaning out the broken imports and just reimporting using your IDE.

### The old registry methods (`Balm.getBlocks()` etc.) have been removed in favor of the new `BalmRegistrars`

See the [short blog post](blog/2025-07-11-register-refactor) and docs on [adding content](registries) for how to use the new registrars.

### The old event system has been removed in favor of the new event mappers

#### Events are now available as event mappers, old event classes removed

Instead of Balm keeping track of its own event bus, event mappers instead take your registrations (and invocations) and map them directly to the native mod loader events (or a Balm supplemental event in cases where mod loaders do not support the event). This allows for better compatibility and avoids wrapping every event in a Balm-specific class.

These new events can be found in `*Callback` classes such as `BlockCallback.Use`. You can also search for `EventMapper.createUnbound` usages to find them all.

Listeners are registered directly on these event mappers via `.register(<handler>)` rather than using `Balm.getEvents().onEvent`.

Event handlers receive the callback parameters directly, i.e. there is no longer an `event` object.

#### `BalmEvent` and `Balm.getEvents().fire()` has been removed

To define your own events, you can use `EventMapper.createBound()` with your existing event class, and fire them using its `.invoker()`.

Note that these events won't fire on native mod loader buses anymore. Third party mods must instead use your event mapper directly to call `.register()` with their handler on them. 

If you do want to provide backwards compatibility or continue to have your mods available on mod-loader specific buses, you will have to use `EventMapper.createUnbound()` instead and then provide a mapping on each loader entrypoint using `.configureMapping()`.

### Kuma by default no longer fires screen handler events if a widget has focus 

This is to avoid key mappings from being handled when the user has a widget like a text field focused. 

You can override this behaviour by calling `.ignoreScreenFocus()` in your key mapping builder.